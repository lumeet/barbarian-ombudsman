#!/usr/bin/env node

(function() {
  "use strict";

  var program  = require('commander'),
      source   = require('../lib/source_resolve'),
      keyDiff  = require('../lib/key_diff'),
      reporter = require('../lib/reporter');

  var list = function(val) {
    return val.split(',');
  }

  program
    .version(require('../package.json').version)
    .option('-r, --respath [string]', 'Resource path')
    .option('-l, --locales <identifiers>', 'Locales, e.g. en,fi', list)
    .option('-p, --prefix', 'File basename as key prefix')
    .parse(process.argv);

  var locales = source(program).locales();
  var diff = keyDiff(locales);
  diff.report(reporter());
})();
